Restart of English language-learning. July 2021
===============================================
run-1 -- attempt to have a perfect run-through of everything.


Databases in the `~/data` directory
===================================

* run-1-en_pairs-tranche-1.rdb -- guten-tranche-1 only.
* run-1-en_pairs-tranche-12.rdb -- tranche 1 and 2
* run-1-en_pairs-tranche-123.rdb -- tranche 1, 2 and 3
* run-1-en_pairs-tranche-1234.rdb -- tranche 1-4
* run-1-en_pairs-tranche-12345.rdb -- tranche 1-5

All of the above include the MI marginals for word-pairs.


Notes:
------
tranche1 appears to be 3028 files
... seems that SSD is maybe 2x faster than spinning disk.

-----------------------------
tranche-2  is 4500 files -- the submitter ran at
real    792m5.161s
user    6m42.704s
sys     3m2.937s

so 10.56 seconds elapsed wait per file. Ouch.

virt/res RAM is 12.9 11.2GB  and 3085:20 runtime, so 41.1 seconds
CPU/file.  So this is running with 4 cores. Past experience suggests
most of this is actually Rocks doing stuff.

(ListLink . 6921181)
(EvaluationLink . 6921181)
(WordNode . 79348)

scheme@(en-pairs)> (display (monitor-storage storage-node))
Connected to `rocks:///home/ubuntu/data//en_pairs.rdb`
Database contents:
  Next aid: 29287757
  Atoms/Links/Nodes a@: 29287756 l@: 29145610 n@: 142126
  Keys/Incoming/Hash k@: 14714945 i@: 58282073 h@: 0

2053120 run-1-en_pairs-tranche-12.rdb -- 2GB


So .. 72 Bytes/atom ! Wow!

---------------------------
tranche-3  has 5711 files
processed in:
real    1863m46.768s -- so 31 hours wall-clock.
user    9m3.785s
sys     4m3.325s

process is using 30GB RAM at conclusion.
7985:17 mm:ss runtime, so about 133 cpu-hours.

(gc-time-taken . 31026312786171) total of 31026 seconds = 517 min
(heap-total-allocated . 2648643234624) = 2648 GB. outrageous.
(gc-times .  500306))

(ListLink . 18389495)
(EvaluationLink . 18389495)
(WordNode . 242910)

 du -s en_pairs.rdb
3601356 run-1-en_pairs-tranche-123.rdb - 3.5GB

Next aid: 56675645

-------------------------
tranche 4
cogserver segfaulted with 4810 articles remaining.
restart, with unlimited core size...
crash again with 3539 articles remaining Oh, well-known LG patch #1206

initial aid=76425718

4754676 run-1-en_pairs-tranche-1234.rdb
-------------------------
tranche 5

ingestion of articles:
real    2438m9.787s -- so 41 hours wall-clock time.
user    12m43.386s
sys     5m51.068s

process is using 37GB RAM at conclusion.
11944:03 mm:ss runtime, so about 200 cpu-hours.

(gc-time-taken . 70893060058413)
(heap-total-allocated . 3542955891120)
(gc-times .  566691)

(ListLink . 22982070)
(EvaluationLink . 22982070)
(WordNode . 278963)

Rocks: initial aid=104150297

du -s
6590776 run-1-en_pairs-tranche-12345.rdb -- 6.6 GBytes

-------------------------

Computing word-pair MI.
tranche-1:
Elapsed time to load ANY-link pairs: 577 secs
Support: found num left= 104879 num right= 105701 in 283 secs
Finished left norm marginals in 402 secs
Finished right norm marginals in 396 secs
Done with wild-card count N(x,*) and N(*,y) in 807 secs
Done computing 9797694 pair frequencies in 508 secs
Done computing 9797694 pair MI's in 2079 secs
Finished left entropy subtotals in 410 secs
Finished right entropy subtotals in 407 secs
Finished left MI subtotals in 404 secs
Finished right MI subtotals in 414 secs
Finished with MI computations; this took  1.51 hours.
Rows: 104879 Columns: 105701
Sparsity (-log_2): 10.144
Avg obs per pair: 27.449
Entropy Total: 17.827   Left: 9.7963   Right: 9.5884
Total MI: 1.5572

tranche-2: 
Finished with MI computations; this took 2.185 hours.
Rows: 140140 Columns: 142101
Sparsity (-log_2): 10.416
Avg obs per pair: 33.804
Entropy Total: 17.889   Left: 9.8102   Right: 9.5463
Total MI: 1.4677

tranche-3
Finished with MI computations; this took 4.428 hours.
Rows: 304085 Columns: 306920
Sparsity (-log_2): 11.693
Avg obs per pair: 34.966
Entropy Total: 18.378   Left: 10.069   Right: 9.8321
Total MI: 1.5227

tranche-4
Finished with MI computations; this took 6.144 hours.
Rows: 397229 Columns: 402896
Sparsity (-log_2): 12.040
Avg obs per pair: 37.660
Entropy Total: 18.503   Left: 10.109   Right: 9.8801
Total MI: 1.4863

tranche-5
Finished with MI computations; this took 9.248 hours.
Rows: 531345 Columns: 538513
Sparsity (-log_2): 12.431
Avg obs per pair: 40.360
Entropy Total: 18.631   Left: 10.148   Right: 9.9265
Total MI: 1.4431

=========================================
MPG processing.

run-1-en_mpg-tranche-1.rdb -- done, looks good, I guess.


MPG for tranche 5: load each of the prior tranches and then restart:
start with tranche-1:
reported time to load pairs: 6488 sec 
takes 93.1 GB to load word pairs. MPG of tranche 1 goes up to 105.6 GB
So delta = 12.5GB extra
wall-clock time of 408 mins. = 6.8 hours
cpu time of 3155 mins =  52.6 hours

next tranche-2:
reported time to load pairs: 7397 sec 
cpu time to load pairs = 126:01 mm:ss = 7560 sec
tranche 2 is then goes up to 103.7 GB
so delta = 10.6GB extra
wall-clock time of 260m29.689s = 4.3 hrs
cputime = 2061:02 = 34.3 hours

next tranche-3
Elapsed time to load ANY-link pairs: 7235 secs
tranche-3 RAM 116.2 GB so delta = 23.1 GB
wall clocl     816m13.339s = 13.6 hours
cpu time = 6095:27 = 101.58 hours

next tranche-4

